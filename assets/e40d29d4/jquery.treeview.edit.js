!function(a){var e=a.treeview.classes,l=a.fn.treeview;a.fn.treeview=function(s){return(s=a.extend({},s)).add?this.trigger("add",[s.add]):s.remove?this.trigger("remove",[s.remove]):l.apply(this,arguments).bind("add",(function(l,r){a(r).prev().removeClass(e.last).removeClass(e.lastCollapsable).removeClass(e.lastExpandable).find(">.hitarea").removeClass(e.lastCollapsableHitarea).removeClass(e.lastExpandableHitarea),a(r).find("li").addBack().prepareBranches(s).applyClasses(s,a(this).data("toggler"))})).bind("remove",(function(l,s){var r=a(s).prev(),t=a(s).parent();a(s).remove(),r.filter(":last-child").addClass(e.last).filter("."+e.expandable).replaceClass(e.last,e.lastExpandable).end().find(">.hitarea").replaceClass(e.expandableHitarea,e.lastExpandableHitarea).end().filter("."+e.collapsable).replaceClass(e.last,e.lastCollapsable).end().find(">.hitarea").replaceClass(e.collapsableHitarea,e.lastCollapsableHitarea),t.is(":not(:has(>))")&&t[0]!=this&&(t.parent().removeClass(e.collapsable).removeClass(e.expandable),t.siblings(".hitarea").addBack().remove())}))}}(jQuery);