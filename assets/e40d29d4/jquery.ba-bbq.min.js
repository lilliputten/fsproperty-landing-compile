!function(t){var n,e,r,o,a,i,c,u,f,l,s,p,h,d=Array.prototype.slice,m=decodeURIComponent,v=t.param,g=t.bbq=t.bbq||{},y=t.event.special,b="hashchange",$="querystring",x="fragment",j="elemUrlAttr",w="href",N="src",A=/^.*\?|#.*$/g,C={};function S(t){return"string"==typeof t}function q(t){var n=d.call(arguments,1);return function(){return t.apply(this,n.concat(d.call(arguments)))}}function E(r,a,i,c,u){var p,d,v,g,y;return c!==n?(y=(v=i.match(r?l:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===u&&S(c)?d=c.replace(r?f:A,""):(g=o(v[2]),c=S(c)?o[r?x:$](c):c,d=2===u?c:1===u?t.extend({},c,g):t.extend({},g,c),d=e(d),r&&(d=d.replace(s,m))),p=v[1]+(r?h:d||!v[1]?"?":"")+d+y):p=a(i!==n?i:location.href),p}function R(t,e,r){return e===n||"boolean"==typeof e?(r=e,e=v[t?x:$]()):e=S(e)?e.replace(t?f:A,""):e,o(e,r)}function U(e,r,o,a){return S(o)||"object"==typeof o||(a=o,o=r,r=n),this.each((function(){var n=t(this),i=r||u()[(this.nodeName||"").toLowerCase()]||"",c=i&&n.attr(i)||"";n.attr(i,v[e](c,o,a))}))}v[$]=q(E,0,(function(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),v[x]=r=q(E,1,(function(t){return t.replace(l,"$2")})),v.sorted=e=function(n,e){var r=[],o={};return t.each(v(n,e).split("&"),(function(t,n){var e=n.replace(/(?:%5B|=).*$/,""),a=o[e];a||(a=o[e]=[],r.push(e)),a.push(n)})),t.map(r.sort(),(function(t){return o[t]})).join("&")},r.noEscape=function(n){n=n||"";var e=t.map(n.split(""),encodeURIComponent);s=new RegExp(e.join("|"),"g")},r.noEscape(",/"),r.ajaxCrawlable=function(t){return t!==n&&(t?(f=/^.*(?:#!|#)/,l=/^([^#]*)(?:#!|#)?(.*)$/,h="#!"):(f=/^.*#/,l=/^([^#]*)#?(.*)$/,h="#"),p=!!t),p},r.ajaxCrawlable(0),t.deparam=o=function(e,r){var o={},a={true:!0,false:!1,null:null};return t.each(e.replace(/\+/g," ").split("&"),(function(e,i){var c,u=i.split("="),f=m(u[0]),l=o,s=0,p=f.split("]["),h=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[h])?(p[h]=p[h].replace(/\]$/,""),h=(p=p.shift().split("[").concat(p)).length-1):h=0,2===u.length)if(c=m(u[1]),r&&(c=c&&!isNaN(c)?+c:"undefined"===c?n:a[c]!==n?a[c]:c),h)for(;s<=h;s++)l=l[f=""===p[s]?l.length:p[s]]=s<h?l[f]||(p[s+1]&&isNaN(p[s+1])?{}:[]):c;else t.isArray(o[f])?o[f].push(c):o[f]!==n?o[f]=[o[f],c]:o[f]=c;else f&&(o[f]=r?n:"")})),o},o[$]=q(R,0),o[x]=a=q(R,1),t[j]||(t[j]=function(n){return t.extend(C,n)})({a:w,base:w,iframe:N,img:N,input:N,form:"action",link:w,script:N}),u=t[j],t.fn[$]=q(U,$),t.fn[x]=q(U,x),g.pushState=i=function(t,e){S(t)&&/^#/.test(t)&&e===n&&(e=2);var o=t!==n,a=r(location.href,o?t:{},o?e:2);location.href=a},g.getState=c=function(t,e){return t===n||"boolean"==typeof t?a(t):a(e)[t]},g.removeState=function(e){var r={};e!==n&&(r=c(),t.each(t.isArray(e)?e:arguments,(function(t,n){delete r[n]}))),i(r,2)},y[b]=t.extend(y[b],{add:function(e){var a;function i(t){var e=t[x]=r();t.getState=function(t,r){return t===n||"boolean"==typeof t?o(e,t):o(e,r)[t]},a.apply(this,arguments)}if(t.isFunction(e))return a=e,i;a=e.handler,e.handler=i}})}(jQuery),function(t,n,e){var r,o="hashchange",a=document,i=t.event.special,c=a.documentMode,u="on"+o in n&&(c===e||c>7);function f(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}t.fn[o]=function(t){return t?this.bind(o,t):this.trigger(o)},t.fn[o].delay=50,i[o]=t.extend(i[o],{setup:function(){if(u)return!1;t(r.start)},teardown:function(){if(u)return!1;t(r.stop)}}),r=function(){var r,i,c,l={},s=f(),p=function(t){return t},h=p,d=p;function m(){var e=f(),a=d(s);e!==s?(h(s=e,a),t(n).trigger(o)):a!==s&&(location.href=location.href.replace(/#.*/,"")+a),r=setTimeout(m,t.fn[o].delay)}return l.start=function(){r||m()},l.stop=function(){r&&clearTimeout(r),r=e},!u&&(l.start=function(){i||(c=(c=t.fn[o].src)&&c+f(),i=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",(function(){c||h(f()),m()})).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,a.onpropertychange=function(){try{"title"===event.propertyName&&(i.document.title=a.title)}catch(t){}})},l.stop=p,d=function(){return f(i.location.href)},h=function(n,e){var r=i.document,c=t.fn[o].domain;n!==e&&(r.title=a.title,r.open(),c&&r.write('<script>document.domain="'+c+'"<\/script>'),r.close(),i.location.hash=n)}),l}()}(jQuery,this);