!function(e){function s(s,i,a,t){function h(s){var i=e("<li/>").attr("id",this.id||"").html("<span>"+this.text+"</span>").appendTo(s);if(this.classes&&i.children("span").addClass(this.classes),this.expanded&&i.addClass("open"),this.hasChildren||this.children&&this.children.length){var a=e("<ul/>").appendTo(i);this.hasChildren&&(i.addClass("hasChildren"),h.call({classes:"placeholder",text:"&nbsp;",children:[]},a)),this.children&&this.children.length&&e.each(this.children,h,[a])}}e.ajax(e.extend(!0,{url:s.url,dataType:"json",data:{root:i},success:function(s){a.empty(),e.each(s,h,[a]),e(t).treeview({add:a})}},s.ajax))}var i=e.fn.treeview;e.fn.treeview=function(a){if(!a.url)return i.apply(this,arguments);var t=this;t.children().size()||s(a,"source",this,t);var h=a.toggle;return i.call(this,e.extend({},a,{collapsed:!0,toggle:function(){var i=e(this);if(i.hasClass("hasChildren")){var n=i.removeClass("hasChildren").find("ul");s(a,this.id,n,t)}h&&h.apply(this,arguments)}}))}}(jQuery);